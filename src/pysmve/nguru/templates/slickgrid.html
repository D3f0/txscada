{% load static %}

<html>
    <head>
        <title>Prueba de SlickGrid</title>
        <link rel="stylesheet" type="text/css" href="{% static "jquery-ui-bootstrap/css/custom-theme/jquery-ui-1.9.2.custom.css" %}">
        <link rel="stylesheet" href="{% static "slickgrid/slick.grid.css" %}" type="text/css"/>
        <link rel="stylesheet" href="{% static "slickgrid/css/smoothness/jquery-ui-1.8.16.custom.css" %}" type="text/css"/>
        <link rel="stylesheet" type="text/css" href="/static/jquery-ui-bootstrap/css/custom-theme/jquery-ui-1.9.2.custom.css">
        <script src="{% static "initializr/js/vendor/modernizr-2.6.2-respond-1.1.0.min.js" %}"></script>

        <style>
            .slick-cell {
                font-size: 12px;

            }
        </style>
    </head>

    <body>
        <div id="grid-eventos" style="width: 600px; height: 300px; border: 1px solid red;">


        <script src="{% static "jquery-ui-bootstrap/assets/js/jquery-1.9.0.min.js" %}"></script>
        <!-- script src="{% static "jquery-ui-bootstrap/assets/js/bootstrap.min.js" %}"></script -->
        <script src="{% static "jquery-ui-bootstrap/assets/js/holder.js" %}"></script>
        <script src="{% static "jquery-ui-bootstrap/assets/js/jquery-ui-1.10.0.custom.min.js" %}"></script>
        <!-- Includes SlickGrid -->
        <script src="{% static "slickgrid/lib/jquery.event.drag-2.0.min.js" %}"></script>
        <script src="{% static "slickgrid/slick.core.js" %}"></script>
        <script src="{% static "slickgrid/slick.grid.js" %}"></script>

        <script>
                var grid;
                var columns = [
                { id: "title", name: "Title", field: "title", sortable: true },
                { id: "duration", name: "Duration", field: "duration", sortable: true, formatter: dayFormatter },
                { id: "%", name: "% Complete", field: "percentComplete", sortable: true },
                { id: "start", name: "Start", field: "start", formatter: dateFormatter, sortable: true },
                { id: "finish", name: "Finish", field: "finish", formatter: dateFormatter, sortable: true },
                { id: "effort-driven", name: "Effort Driven", field: "effortDriven", sortable: true }
                ];

                function dayFormatter(row, cell, value, columnDef, dataContext) {
                  return value + ' days';
                }

                function dateFormatter(row, cell, value, columnDef, dataContext) {
                  return value.getMonth() + '/' + value.getDate() + '/' + value.getFullYear();
                }

                var options = {
                enableCellNavigation: true,
                enableColumnReorder: false,
                multiColumnSort: true
                };

                $(function () {
                var MS_PER_DAY = 24 * 60 * 60 * 1000;
                var data = [];
                for (var i = 0; i < 500; i++) {
                  var startDate = new Date(new Date("1/1/1980").getTime() + Math.round(Math.random() * 365 * 25) * MS_PER_DAY);
                  var endDate = new Date(startDate.getTime() + Math.round(Math.random() * 365) * MS_PER_DAY);
                  data[i] = {
                    title: "Task " + i,
                    duration: Math.round(Math.random() * 30) + 2,
                    percentComplete: Math.round(Math.random() * 100),
                    start: startDate,
                    finish: endDate,
                    effortDriven: (i % 5 == 0)
                  };
                }

                grid = new Slick.Grid("#grid-eventos", data, columns, options);

                grid.onSort.subscribe(function (e, args) {
                  var cols = args.sortCols;

                  data.sort(function (dataRow1, dataRow2) {
                    for (var i = 0, l = cols.length; i < l; i++) {
                      var field = cols[i].sortCol.field;
                      var sign = cols[i].sortAsc ? 1 : -1;
                      var value1 = dataRow1[field], value2 = dataRow2[field];
                      var result = (value1 == value2 ? 0 : (value1 > value2 ? 1 : -1)) * sign;
                      if (result != 0) {
                        return result;
                      }
                    }
                    return 0;
                  });
                  grid.invalidate();
                  grid.render();
                });
                });




        </script>
    </body>
</html>
